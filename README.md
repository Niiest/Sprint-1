# Итоговый проект первого модуля

##  Инфраструктура
Docker-compose файл лежит в корне в файле `compose.yml`

##  Приложение
Команда для запуска: go run . localhost:9094 my_topic 5000

### Структура
Приложение находится в папке src. Код модуля main разбит на отдельные файлы:
1. main
    - чтение параметров запуска
    - запуск продьюсера и консьюмеров
2. models
    - типы объектов, которыми будут обмениваться продьюсер с консьюмерами
3. producer
    - создание и запуск в бесконечном цикле продьюсера
4. consumer
    - создание и запуск в бесконечном цикле чтений консьюмеров обоих типов
        - RunPullingConsumer - запуск консьюмера с pull-моделью
        - RunEventConsumer - запуск консьюмера с push-моделью

### Этапы работы
1. Парсинг параметров запуска
2. Запуск продьюсера
    - Создание логируется `Продюсер создан rdkafka#producer-1`
    - Работа в фоне описывается логами:
        - `Отправляется сообщение: {...}`
        - `Отправлено сообщение в топик my_topic [...]`
        - `Отправлен заказ: {...}`
    - Ошибки подключения логируются при попытке отправить очередное сообщение
3. Запуск двух консьюмеров
    - Создание логируется `Pull-консьюмер создан rdkafka#consumer-2` или `Event-консьюмер создан rdkafka#consumer-3`
    - Работа в фоне описывается логами:
        - `Сообщений нет для pull-консьюмера, повтор` (`Сообщений нет для event-консьюмера, повтор`)
        - `Получено сообщение pull-консьюмером` (`Получено сообщение event-консьюмером`)
        - `Консьюмером получено сообщение в топик my_topic[2]@31:\n{...}`
        - `Оффсет закоммичен вручную`
    - Ошибки подключения логируются при попытке вытащить очередное сообщение
4. Ожидание сигнала от ОС на выход
    - Логируется как `Передан сигнал interrupt: приложение останавливается`
